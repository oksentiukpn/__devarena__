{% extends "base.html" %}

{% block title %}{{ post.title }} by {{ post.author.username }} - DevArena{% endblock %}

{% block meta_description %}{{ post.description[:150] }}...{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

    <div class="mb-6">
        <a href="/feed" class="text-zinc-400 hover:text-emerald-500 transition-colors flex items-center gap-2 w-fit">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/></svg>
            Back to Feed
        </a>
    </div>

    <article class="bg-zinc-900/50 border border-zinc-800 rounded-2xl overflow-hidden">
        <div class="p-5 pb-0">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-full bg-zinc-800 flex items-center justify-center text-zinc-400 font-bold">
                    {{ post.author.username[:2].upper() }}
                </div>
                <div>
                    <span class="font-semibold text-white block">{{ post.author.username }}</span>
                    <span class="text-zinc-500 text-sm">@{{ post.author.username }} Â· {{ post.created_at.strftime('%b %d') }}</span>
                </div>
            </div>
        </div>

        <div class="p-5">
            <h1 class="text-xl font-bold text-white mb-2">{{ post.title }}</h1>
            <p class="text-zinc-300 text-base mb-6">{{ post.description }}</p>

            <div class="flex flex-wrap gap-2 mb-4">
                <span class="px-2.5 py-1 bg-emerald-600/10 text-emerald-400 border border-emerald-600/20 text-xs rounded-md uppercase font-bold">{{ post.language }}</span>
                {% if post.tags %}
                    {% for tag in post.tags.split(',') %}
                        <span class="px-2.5 py-1 bg-zinc-800 text-zinc-400 text-xs rounded-md">#{{ tag.strip() }}</span>
                    {% endfor %}
                {% endif %}
            </div>

            <div class="bg-[#0d0d0f] border border-zinc-800 rounded-xl overflow-hidden">
                <div class="flex items-center justify-between px-4 py-2 bg-zinc-900/50 border-b border-zinc-800">
                    <span class="text-xs text-zinc-500 font-mono">snippet.{{ post.language }}</span>
                </div>
                <pre class="p-4 overflow-x-auto text-sm scrollbar-thin"><code class="font-mono text-zinc-300">{{ post.code }}</code></pre>
            </div>
        </div>
    </article>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', (event) => {
    document.querySelectorAll('pre code').forEach((el) => {
      hljs.highlightElement(el);
    });
  });
</script>
{% endblock %}
